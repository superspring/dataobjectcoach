if(!window.Node){window.Node={};Node.ELEMENT_NODE=1;Node.ATTRIBUTE_NODE=2;Node.TEXT_NODE=3;Node.CDATA_SECTION_NODE=4;Node.ENTITY_REFERENCE_NODE=5;Node.ENTITY_NODE=6;Node.PROCESSING_INSTRUCTION_NODE=7;Node.COMMENT_NODE=8;Node.DOCUMENT_NODE=9;Node.DOCUMENT_TYPE_NODE=10;Node.DOCUMENT_FRAGMENT_NODE=11;Node.NOTATION_NODE=12}if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}var ProtoJS={Browser:{IE:!!(window.attachEvent&&navigator.userAgent.indexOf("Opera")===-1),Opera:navigator.userAgent.indexOf("Opera")>-1,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")===-1,MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)}};if(typeof console=="undefined"){console={log:function(){}}}ProtoJS.mix=function(b,a,d){d=d||false;for(var c in b){if(d||!a[c]){a[c]=b[c]}else{console.log("ProtoJS: Found an implementation for "+c)}}};ProtoJS.Event={observe:function(b,a,c){if(!b){console.log("WARN: passed invalid element to ProtoJS.Event.observe.")}else{if(b.addEventListener){b.addEventListener(a,c,false)}else{b.attachEvent("on"+a,c)}}return b},enable:function enable(a){ProtoJS.mix(ProtoJS.Event.Handling,a)}};ProtoJS.Event.Handling={on:function on(b,a){if(!this.eventHandlers){this.eventHandlers=[]}if(!this.eventHandlers[b]){this.eventHandlers[b]=[]}this.eventHandlers[b].push(a)},fireEvent:function fireEvent(a,b){if(!this.eventHandlers){return}if(this.eventHandlers[a]){this.eventHandlers[a].iterate(function(c){c(b)})}}};ProtoJS.Object={isUndefined:function(a){return typeof a=="undefined"}};ProtoJS.mix(ProtoJS.Object,Object);ProtoJS.String={contains:function contains(a){return this.indexOf(a)>-1},containsOneOf:function containsOneOf(b){var a=false;b.iterate(function(c){a=a||this.contains(c)}.scope(this));return a},trim:function trim(a){if(typeof this.replace=="function"){a=this}return a.replace(/^\s*/,"").replace(/\s*$/,"")},isArray:function isArray(){return false},isHash:function isHash(){return false},isFunction:function isFunction(){return false},isString:function isString(){return true},isNumber:function isNumber(){return false},isClass:function isClass(){return false}};ProtoJS.mix(ProtoJS.String,String.prototype);ProtoJS.Number={isArray:function(){return false},isHash:function(){return false},isFunction:function(){return false},isString:function(){return false},isNumber:function(){return true},isClass:function(){return false},toHex:function(){number=this.valueOf()<0?4294967295+this.valueOf()+1:this.valueOf();return number.toString(16).toUpperCase()}};ProtoJS.mix(ProtoJS.Number,Number.prototype);(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(h){var g=this.prototype;a=true;var f=new this();a=false;function c(i,j){return function(){var l=this._super;this._super=g[i];var k=j.apply(this,arguments);this._super=l;return k}}f.isArray=function(){return false};f.isHash=function(){return false};f.isNumber=function(){return false};f.isString=function(){return false};f.isFunction=function(){return false};for(var e in h){f[e]=typeof h[e]=="function"&&typeof g[e]=="function"&&b.test(h[e])?c(e,h[e]):h[e]}if(ProtoJS.Browser.IE&&h.toString){f.toString=c("toString",h.toString)}function d(){if(!a&&this.init){this.init.apply(this,arguments)}}if(!f.isHash()){f.isClass=function(){return true}}d.prototype=f;d.constructor=d;d.extend=arguments.callee;d.isArray=function(){return false};d.isHash=function(){return false};d.isNumber=function(){return false};d.isString=function(){return false};d.isFunction=function(){return false};d.isClass=function(){return true};return d};Class.extendMethod=function(c,g,f,e){var d=c.prototype[g];c.prototype[g]=function(){if(e){f.apply(this,arguments)}d.apply(this,arguments);if(!e){f.apply(this,arguments)}}}})();function $A(a){var c=a.length||0;var b=new Array(c);while(c--){b[c]=a[c]}return b}ProtoJS.Array={compare:function(a){if(this.length!=a.length){return false}for(var b=0;b<a.length;b++){if(this[b].compare){if(!this[b].compare(a[b])){return false}}if(this[b]!==a[b]){return false}}return true},has:function(a){return this.indexOf(a)>-1},unique:function unique(){var a=this.dup();this.clear();a.iterate(function(b){if(!this.has(b)){this.push(b)}}.scope(this));return this},iterate:function(c,b){for(var a=0,d=this.length;a<d;a++){c.call(b,this[a],a)}},dup:function(){return[].concat(this)},clear:function(){this.length=0;return this},remove:function(c){var b=c.isArray()?c:$A(arguments);var a=this.dup();this.clear();a.iterate(function(d){if(!b.has(d)){this.push(d)}}.scope(this));return this},min:function min(){var a=null;this.iterate(function(b){if(a==null||b<a){a=b}});return a},max:function max(){var a=null;this.iterate(function(b){if(a==null||b>a){a=b}});return a},isArray:function(){return true},isHash:function(){return false},isFunction:function(){return false},isString:function(){return false},isNumber:function(){return false},isClass:function(){return false}};ProtoJS.mix(ProtoJS.Array,Array.prototype);var Hash=Class.extend({init:function init(a){this.hash=a||{}},set:function(a,b){this.hash[a]=b},get:function(a){return this.hash[a]},keys:function keys(){var a=[];this.iterate(function(b,c){a.push(b)});return a},values:function values(){var a=[];this.iterate(function(b,c){a.push(c)});return a},hasKey:function has(a){return this.keys().has(a)},hasValue:function has(a){return this.values().has(a)},iterate:function each(c,b){for(var a in this.hash){c.call(b,a,this.hash[a])}},isArray:function(){return false},isHash:function(){return true},isFunction:function(){return false},isString:function(){return false},isNumber:function(){return false},isClass:function(){return false}});var $H=function(a){return new Hash(a)};ProtoJS.Function={after:function(){var c=this;var a=$A(arguments);var b=a.shift();return window.setTimeout(function(){return c.apply(c,a)},b)},scope:function scope(a){var b=this;return function(){return b.apply(a,arguments)}},isArray:function(){return false},isHash:function(){return false},isFunction:function(){return true},isString:function(){return false},isNumber:function(){return false},isClass:function(){return false}};ProtoJS.mix(ProtoJS.Function,Function.prototype);ProtoJS.Ajax=Class.extend({init:function(){this.xmlhttp=null;if(window.XMLHttpRequest){this.xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}else{alert("Your browser does not support XMLHTTP!")}}},fetch:function(a,b){if(a.substring(0,4)=="http"){return this.fetchUsingXDR(a,b)}this.xmlhttp.open("GET",a,typeof b=="function");if(b){this.xmlhttp.onreadystatechange=function(){b.call(this,this.xmlhttp)}.scope(this)}this.xmlhttp.send(null);return this.xmlhttp.responseText},fetchUsingXDR:function(a,d){ProtoJS.XDR.push(d);var b=document.createElement("script");var c=a.contains("?")?"&":"?";b.src=a+c+"f=ProtoJS.XDR["+(ProtoJS.XDR.length-1)+"]";b.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(b)}});ProtoJS.XDR=[];ProtoJS.Timer=Class.extend({init:function init(){this.reset()},start:function start(){this.startTime=this.startTime||this.getTime();this.stopTime=null;return this},stop:function stop(){this.stopTime=this.getTime();return this},getTime:function getTime(){return new Date().getTime()},reset:function reset(){this.startTime=null},getElapsed:function getElapsed(){var a=this.getTime();return(this.stopTime||a)-(this.startTime||a)}});ProtoJS.Font=Class.extend({init:function init(b){this.scale=null;this.size=null;var a=b.match("(\\d+)([^\\s/]+)[\\s/]*");if(a){this.size=a[1];this.scale=a[2]}},getSize:function getSize(a){if(this.scale&&this.size&&ProtoJS.Font.SizeMap[this.scale]){return ProtoJS.Font.SizeMap[this.scale][this.size][a]}return 0},getPxSize:function getPxSize(){return this.getSize("px")},getPtSize:function getPtSize(){return this.getSize("pt")},getEmSize:function getEmSize(){return this.getSize("em")},getPctSize:function getPctSize(){return this.getSize("em")*100}});ProtoJS.Font.SizeMap={px:{},pt:{},em:{}};[{pt:5.5,px:6,em:0.375},{pt:6,px:8,em:0.5},{pt:7,px:9,em:0.55},{pt:7.5,px:10,em:0.625},{pt:8,px:11,em:0.7},{pt:9,px:12,em:0.75},{pt:10,px:13,em:0.8},{pt:10.5,px:14,em:0.875},{pt:11,px:15,em:0.95},{pt:12,px:16,em:1},{pt:13,px:17,em:1.05},{pt:13.5,px:18,em:1.125},{pt:14,px:19,em:1.2},{pt:14.5,px:20,em:1.25},{pt:15,px:21,em:1.3},{pt:16,px:22,em:1.4},{pt:17,px:23,em:1.45},{pt:18,px:24,em:1.5},{pt:20,px:26,em:1.6},{pt:22,px:29,em:1.8},{pt:24,px:32,em:2},{pt:26,px:35,em:2.2},{pt:27,px:36,em:2.25},{pt:28,px:37,em:2.3},{pt:29,px:38,em:2.35},{pt:30,px:40,em:2.45},{pt:32,px:42,em:2.55},{pt:34,px:45,em:2.75},{pt:36,px:48,em:3}].iterate(function(a){ProtoJS.Font.SizeMap.px[a.px]=a;ProtoJS.Font.SizeMap.pt[a.pt]=a;ProtoJS.Font.SizeMap.em[a.em]=a});ProtoJS.Test=Class.extend({init:function init(){this.waitingFor=0},setTester:function setTester(a){this.tester=a},isReady:function isReady(){return this.waitingFor<1},assertEqual:function assertEqual(b,a,c){if(b==a){this.tester.success(this.currentTestName)}else{c=c||"";this.tester.fail(this.currentTestName,"  Expected:\n"+a+"\n  Got:\n"+b+"\n  "+c+"\n")}},assertNotEqual:function assertEqual(b,a,c){if(b!=a){this.tester.success(this.currentTestName)}else{c=c||"";this.tester.fail(this.currentTestName,"  Expected:\n"+a+"\n  Got:\n"+b+"\n  "+c+"\n")}},assertTrue:function assertEqual(b,a){this.assertEqual(b,true,a)},assertFalse:function assertEqual(b,a){this.assertEqual(b,false,a)},assertEqualAfter:function assertEqualAfter(b,a,e,d){this.waitingFor++;var c=this;window.setTimeout(function(){c.assertEqual(a(),e,d);c.waitingFor--},b)}});ProtoJS.Test.RunDriver=Class.extend({init:function init(){this.units=[];this.logDetails=true},withoutDetails:function withoutDetails(){this.logDetails=false;return this},log:function log(a){if(this.logDetails){print(a)}},addTestUnit:function addTestUnit(a){this.units.push(a);return this},start:function start(){this.prepare();this.testNextUnit();if(Envjs.wait){Envjs.wait()}},prepare:function prepare(){this.successful=0;this.failed=0;this.waitingFor=0;this.currentUnitIndex=-1;this.currentUnit=null},testNextUnit:function testNextUnit(){if(this.currentUnit==null||this.currentUnit.isReady()){if(this.currentUnitIndex<this.units.length-1){this.currentUnitIndex++;this.currentUnit=new this.units[this.currentUnitIndex]();this.currentUnit.setTester(this);this.currentTests=$H(this.units[this.currentUnitIndex].prototype).keys().sort();this.currentTestIndex=-1;if(this.currentUnit.getScope){this.log("Testing "+this.currentUnit.getScope())}this.performNextTest();this.testNextUnit()}else{this.fireEvent("ready",this)}}else{this.testNextUnit.scope(this).after(10)}},performNextTest:function performNextTest(){if(this.currentUnit.isReady()){if(this.currentTests.length>0&&this.currentTestIndex<this.currentTests.length){this.currentTestIndex++;var a=this.currentTests[this.currentTestIndex];if(a&&a.match(/^test/)){this.log("- "+a);this.currentUnit.currentTestName=a;if(this.currentUnit.before){this.currentUnit.before()}this.currentUnit[a].scope(this.currentUnit)();if(this.currentUnit.after){this.currentUnit.after()}}this.performNextTest()}else{}}else{this.performNextTest.scope(this).after(10)}},success:function success(a){this.successful++},fail:function fail(a,b){this.failed++;this.log("FAIL: "+a+"\n"+b)},getResults:function getResults(){return{total:this.failed+this.successful,failed:this.failed,successful:this.successful}},test:function test(a){this.testFunction=a;this.prepare();return this},using:function using(a){if(!this.testFunction){print("Please provide a function to test first...");return}a.iterate(function(d){var c=this.testFunction(d.data,d.msg,d.result);var b=typeof d.expected=="boolean"?d.expected:true;if(c.result===b){this.success(d.name)}else{this.fail(d.name,c.info)}}.scope(this));return this}});ProtoJS.Event.enable(ProtoJS.Test.RunDriver.prototype);ProtoJS.Test.Runner=new ProtoJS.Test.RunDriver();ProtoJS.version="0.3-6";